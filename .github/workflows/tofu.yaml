on:
  pull_request:
    branches:
        - main
jobs:
  deploy-infra:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: OpenTofu - Setup Tofu
        uses: opentofu/setup-opentofu@v1.0.3
        with:
            tofu_version: 1.7.2
      - name: Initialize Tofu
        run: cd infra && tofu init
      - id: plan
        run: tofu plan -no-color
      - run: echo ${{ steps.plan.outputs.stdout }}
      - run: echo ${{ steps.plan.outputs.stderr }}
      - run: echo ${{ steps.plan.outputs.exitcode }}
      - run: pwd
      # - name: Deploy Tofu
      #   run: tofu apply

